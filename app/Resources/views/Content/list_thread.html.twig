{% extends "::base.html.twig" %}
{% block title %}Liste du contenu{% endblock %}

{% block body %}
    {{ include('Content/add_thread.html.twig', {'form': thread_form}) }}
    <ul>
    {% for t in threads %}
        <li class="thread">
            {{ t.id }}
            {{ t.content }}
            Poste par : {{ t.lastname|upper }} {{ t.firstname }} le {{ t.postDate|date("d F Y H:i:s") }}

            <button type="button" class="reply-to" value="{{ t.id }}">Repondre</button>
            <div class="comment" id="comment-{{ t.id }}">
                <ul class="comments">
                {% for r in replies %}
                    {% if r.idThread == t.id %}
                        <li style="background:red;">
                            {{ r.id }}
                            {{ r.idThread }}
                            {{ r.idAuthor }}
                            {{ r.content }}
                            {{ r.postDate|date("d F Y H:i:s") }}
                        </li>
                    {% endif %}
                {% endfor %}
                </ul>
                <form method="POST" action="{{ path("add_reply") }}">
                    {{ form_start(t.reply_form) }}
                    {{ form_row(t.reply_form.content) }}
                    {{ form_row(t.reply_form.id_thread, { 'value': t.id }) }}
                    {{ form_end(t.reply_form) }}
                </form>

            </div>
            <hr>
        </li>
    {% endfor %}
    </ul>
{% endblock %}