{% extends "::base.html.twig" %}
{% block title %}Liste du contenu{% endblock %}

{% block body %}
    {{ include('Content/add_thread.html.twig', {'form': thread_form}) }}
    <ul>
    {% for t in threads %}
        <li class="thread">
            {{ t.content|nl2br }}
            <br/>
            <i class="material-icons">perm_identity</i>{{ t.lastname|upper }} {{ t.firstname }} <i class="material-icons">schedule</i> {{ t.postDate|date("d F Y H:i:s") }}

            <button type="button" class="reply-to" value="{{ t.id }}"><i class="material-icons">reply</i></button>
            <div class="comment" id="comment-{{ t.id }}">
                <ul class="comments">
                {% for r in replies %}
                    {% if r.idThread == t.id %}
                        <li style="background:red;">
                            {{ r.id }}
                            {{ r.idThread }}
                            {{ r.idAuthor }}
                            {{ r.content|nl2br }}
                            {{ r.postDate|date("d F Y H:i:s") }}
                        </li>
                    {% endif %}
                {% endfor %}
                </ul>
                <form method="POST" action="{{ path("add_reply") }}">
                    {{ form_start(t.reply_form) }}
                        {{ form_row(t.reply_form.content, { "attr" : { "class" : "materialize-textarea" }}) }}
                        {{ form_row(t.reply_form.id_thread, { "value" : t.id }) }}
                        {{ form_row(t.reply_form.submit, { "attr" : { "class" : "btn" }}) }}
                    {{ form_end(t.reply_form) }}
                </form>

            </div>
            <hr>
        </li>
    {% endfor %}
    </ul>
{% endblock %}